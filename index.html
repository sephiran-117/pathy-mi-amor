<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Para Pathy ğŸ’</title>

<style>
body,html{
  margin:0;
  height:100%;
  background:#000;
  overflow:hidden;
}
canvas{ display:block; }

#overlay{
  position:absolute;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-family:Arial;
  font-size:28px;
  text-align:center;
  background:rgba(0,0,0,0.7);
}
</style>
</head>

<body>

<div id="overlay">ğŸ’« Toca el universo ğŸ’«</div>

<canvas id="c"></canvas>

<audio id="bgMusic" loop>
  <source src="caprichosa.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
const canvas = document.getElementById("c");
const renderer = new THREE.WebGLRenderer({canvas:canvas, antialias:true});
renderer.setSize(innerWidth, innerHeight);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 5000);
camera.position.z = 300;

// â­ Estrellas
const starGeometry = new THREE.BufferGeometry();
const starCount = 4000;
const positions = new Float32Array(starCount * 3);

for(let i=0;i<starCount;i++){
  const r = 2000 * Math.random();
  const theta = Math.random()*Math.PI*2;
  const phi = Math.acos(2*Math.random()-1);

  positions[i*3] = r*Math.sin(phi)*Math.cos(theta);
  positions[i*3+1] = r*Math.cos(phi);
  positions[i*3+2] = r*Math.sin(phi)*Math.sin(theta);
}

starGeometry.setAttribute("position", new THREE.BufferAttribute(positions,3));
const starMaterial = new THREE.PointsMaterial({color:0xffffff, size:2});
const stars = new THREE.Points(starGeometry, starMaterial);
scene.add(stars);

// ğŸ’– NÃºcleo
const coreMaterial = new THREE.MeshBasicMaterial({color:0xff3366});
const core = new THREE.Mesh(
  new THREE.SphereGeometry(40,64,64),
  coreMaterial
);
scene.add(core);

// ğŸ’Œ Texto gigante
function createBigText(text){
  const canvas = document.createElement("canvas");
  canvas.width = 1024;
  canvas.height = 256;
  const ctx = canvas.getContext("2d");

  ctx.fillStyle="pink";
  ctx.font="bold 120px Arial";
  ctx.textAlign="center";
  ctx.fillText(text,512,160);

  const texture = new THREE.CanvasTexture(canvas);
  const material = new THREE.SpriteMaterial({map:texture});
  const sprite = new THREE.Sprite(material);
  sprite.scale.set(250,60,1);
  sprite.position.y = 120;
  return sprite;
}

const bigText = createBigText("Para Pathy ğŸ’");
bigText.visible = false;
scene.add(bigText);

// ğŸ’– Mensajes orbitando
const messages = [
"ğŸ’– Mi amor",
"âœ¨ Eres mi universo",
"ğŸŒ Mi mundo",
"â¤ï¸ Te amo Pathy",
"ğŸŒ™ Siempre juntos",
"ğŸŒŒ Mi galaxia"
];

const textGroup = new THREE.Group();
scene.add(textGroup);

function createText(text){
  const canvas = document.createElement("canvas");
  canvas.width = 512;
  canvas.height = 128;
  const ctx = canvas.getContext("2d");

  ctx.fillStyle="white";
  ctx.font="bold 60px Arial";
  ctx.textAlign="center";
  ctx.fillText(text,256,80);

  const texture = new THREE.CanvasTexture(canvas);
  const material = new THREE.SpriteMaterial({map:texture});
  const sprite = new THREE.Sprite(material);
  sprite.scale.set(60,20,1);
  return sprite;
}

for(let i=0;i<messages.length;i++){
  const sprite = createText(messages[i]);
  const radius = 150;
  const angle = i * (Math.PI*2/messages.length);

  sprite.position.set(
    radius*Math.cos(angle),
    0,
    radius*Math.sin(angle)
  );

  textGroup.add(sprite);
}

// ğŸ® Movimiento con dedo
let isDragging = false;
let previousX;

document.addEventListener("mousedown", e=>{
  isDragging = true;
  previousX = e.clientX;
});

document.addEventListener("mousemove", e=>{
  if(isDragging){
    const delta = e.clientX - previousX;
    textGroup.rotation.y += delta * 0.005;
    previousX = e.clientX;
  }
});

document.addEventListener("mouseup", ()=> isDragging=false);

document.addEventListener("touchstart", e=>{
  isDragging = true;
  previousX = e.touches[0].clientX;
});

document.addEventListener("touchmove", e=>{
  if(isDragging){
    const delta = e.touches[0].clientX - previousX;
    textGroup.rotation.y += delta * 0.005;
    previousX = e.touches[0].clientX;
  }
});

document.addEventListener("touchend", ()=> isDragging=false);

// ğŸ”„ AnimaciÃ³n
function animate(){
  requestAnimationFrame(animate);
  stars.rotation.y += 0.0003;
  core.rotation.y += 0.01;
  renderer.render(scene,camera);
}
animate();

// ğŸµ Activar todo al tocar
document.addEventListener("click", function() {
  document.getElementById("overlay").style.display="none";
  document.getElementById("bgMusic").play();
  coreMaterial.color.set(0xff66aa);
  bigText.visible = true;
});
</script>

</body>
</html>
